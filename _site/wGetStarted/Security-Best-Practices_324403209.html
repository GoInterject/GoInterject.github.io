
<!-- Page generated 2018-11-21 14:46:58 -0800 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->



<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="en">

<head>
	<base href="/wGetStarted/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<style id="page_style" type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>

	<!--
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	-->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="/favicons/docs@2x.ico"/>
	<!-- metadata -->
	

    <link rel="stylesheet" href="/css/font-awesome.min.css">
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	
	
	

</head>	

<body id="main_body" class="colums">
	

	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/"><img class="logo" src="/images/site-logo.png" alt="Interject Docs" title="Interject Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" >
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>
	</header>

	

	<!-- nav bar -->
	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>Interject Documentation > Security Best Practices</h1> 
									 
									
									<span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">Estimated reading time: </span>
  
  
    7 minutes
  
</span>

									
							
							
							<hr />

<h2 id="overview"><strong>Overview</strong></h2>

<p>Managing security is a key component of the Interject platform, and there are several areas to understand. Security involves both the row level security that can exist in reports and apps and how the middle tier objects are secured. Security also includes which spreadsheet report template can be seen by which users. The paragraphs below discuss each of these areas, best practices in building, and methods to test user access. Click one of the links below to quickly reach each topic.</p>

<ul>
  <li>** Database Connections and Windows Authentication  **</li>
  <li>** Row Level Security for Reports and Apps  **</li>
  <li>** Template Security  **</li>
  <li>** Testing User Access  **</li>
</ul>

<h3 id="database-connections-and-windows-authentication">Database Connections and Windows Authentication</h3>

<p>When setting up Data Connections to connect to a database it is best to use connection strings that use windows authentication instead of a username and password. Although INTERJECT encrypts the connection string value when saved, it is better practice to use a custom website API when a username and password must be used for a database connection.</p>

<h3 id="row-level-security-for-reports-and-apps">Row Level Security for Reports and Apps</h3>

<p>The INTERJECT platform connects the spreadsheet interface to a middle-tier and makes the request under the user context of the session. In this way, a stored procedure can leverage Windows authentication to identify the user. In SQL Server the function to retrieve the username is sysname(). Other database engines that support windows authentication will have other methods. Windows authentication can also be used for website API that connects to INTERJECT over SSL using standard coding practices.</p>

<p>Using a stored procedure and windows authentication, built in row level security features of a database, such as SQL Server, can be used.</p>

<p>In addition to leveraging windows authentication to identify the user, INTERJECT can pass user identity information along with each request to the middle tier. This is useful if windows authentication is not available. If a data portal is configured with the following system parameters, select user context will be provided to each request to the data portal.</p>

<p>System Parameters Related to User Identity:</p>

<table>  
<tr>  
<th>

Parameter 
</th>  
<th>

Description 
</th> </tr>  
<tr>  
<td>

@Interject_NTLogin  
</td>  
<td>

Windows authentication user name (Domain excluded)  
</td> </tr>  
<tr>  
<td>

@Interject_LoginName  
</td>  
<td>

Interject user name logged in  
</td> </tr>  
<tr>  
<td>

@Interject_UserID  
</td>  
<td>

Interject user id  
</td> </tr>  
<tr>  
<td>

@Interject_ClientID  
</td>  
<td>

The client id that is current in the Interject addin. Note that Company and Client may be used interchangeably.  
</td> </tr>  
<tr>  
<td>

@Interject_RequestContext  
</td>  
<td>

Is XML that includes a UserContext node as illustrated below  
</td> </tr> </table>

<p><strong>UserContext XML example:</strong></p>

<UserContext>

<MachineLoginName>jeffh</MachineLoginName>

<MachineName>.</MachineName>

<FullName> </FullName>

<UserId>UohmLThif</UserId>

<ClientId>HKdmUuWT</ClientId>

<LoginName>user@email.com</LoginName>

<LoginAuthTypeId>10</LoginAuthTypeId>

<LoginDateUtc>04/20/2018 2:04:34</LoginDateUtc>

&lt;UserRoles 

<Role>ClientAdmin</Role>

&lt;/UserRoles&gt;

</UserContext>

<p>When the above system parameters are used, it is important for the middle tier object to be configured to receive it. Stored procedures must have the additional parameters added or INTERJECT will show an error to the user when pulling the report. Using an API as a middle tier will not likely create an error when additional parameters are added. Since you control the code for an API, you would need to add additional code in the API before the additional parameters would be utilized.</p>

<p>It is critical to note that it is best practice that stored procedures be configured with <strong>execute</strong> rights for the network group of users that will be using the report. This is so the data tables can be hidden to the users, and their only access is through the stored procedures used in data portals. This configuration, however, provides opportunity for a knowledgeable IT users to execute the procedure with different parameters including user context. For this reason, it is best practice to verify the user context when using windows authentication for stored procedures.</p>

<p>An additional user token is provided by INTERJECT when the Data Portal connects to a website API. The token can be used by the website API to verify the identity of the user against the INTERJECT Authorization API. The use of this token will be described further in the <strong>Using an API with INTERJECT</strong> lab that is currently under construction.</p>

<p>In addition to the UserContext node above, there is a node in the data portal parameter @Interject_RequestContext. The XML node  <UserContextEncrypted></UserContextEncrypted> can be leveraged to trust the user context provided by the data portal parameters. This feature is not enabled, but when available will provide will allow use of client encryption keys and common encryption practices to parse the content.</p>

<p>When considering all the above regarding row level security, you have the ability to specifically identify the user for every data transaction going through the INTERJECT Platform. This identity that can be leveraged in your middle tier code, stored procedure or website API, to be aware of the user’s row level security.</p>

<h3 id="template-security">Template Security</h3>

<p>The spreadsheet files themselves act as reports or application templates. These files are normally uploaded to the INTERJECT Report Library where they are versioned and unable to be changed without the proper INTERJECT security roles. The Report Library was built to contain empty templates where users pull their data after opening the file template. Due to this design, the allowed file size that can be uploaded to the Report Library is 30 MB in size. When reports or apps are opened from the Report Library, they are locally cached and opened in read only mode. The user will in most cases use the template and when done will close the file without saving.</p>

<p>The user may choose to save a copy of the file, such as for auditing purposes or to add personalized changes. It is by design to allow this, even though the user takes the risk of having an outdated version. To assist in management of older versions, INTERJECT does log activity, including the file path and name, so the locations of these copies are known.</p>

<p>The Report Library is built to provide a development cycle status to the report to help with vetting and documenting the approval of new reports. The statuses include, <strong>In Development</strong> , <strong>In Test</strong> , <strong>Live</strong> . See <a href="/wPortal/INTERJECT-Ribbon-Menu-Items_83689479.html"> Report Library </a> for additional information on using the Report Library. The ability to see templates in each status is controlled through INTERJECT user roles. Standard users only see templates that are set to <strong>Live</strong> .</p>

<p>It is best practice to consider the spreadsheet template insecure, since it can easily be shared with other users without proper credentials. Building each report or application with row level security is key to keeping security around your data.</p>

<p>The Report Library has folders where templates are placed, and there is currently only one folder (called <strong>Corporate</strong> ) that has visibility rights for users that have been given the Corporate role. Although it is best practice for every report to have row level security, we recognized it may be advantageous to keep some reports out of view from users when they have no use for them. It is on the road map to provide additional visibility controls to all Report Library folders.</p>

<h3 id="testing-user-access">Testing User Access</h3>

<p>As with all developed applications and row level reports, the testing plan should be built in based on the requirements. In many cases an end-user will want to verify the row level security code is properly implemented.</p>

<p>A best practice method to handle this situation is to add a dataportal parameter such as <strong>@UserTestMode</strong> . In the middle tier code, the existence of a value provided can trigger the following code steps:</p>

<p><strong>Step 1:</strong> Using windows authentication or verifying the user token in an API, check to be sure the user can test another user’s security context. This may be hard coded in the middle tier code, can use a lookup list in a database, or even better, verify the correct group in active directory.</p>

<p><strong>Step 2:</strong> Next, verify the value provided in @UserTestMode represents a valid user.</p>

<p><strong>Step 3:</strong> If the user is allowed to test another user’s security context, change switch the identity so the row level security code is using the identity from @UserTestMode. This operation may be logged for later audit purposes.</p>

<p><strong>Step 4:</strong> In some cases in production, enabling this test mode can be helpful to a support team but the ability to save data changes (if provided in the app) should be prohibited.</p>

<p>It is recognized the above will not work if row level security is using the database engine row level security features based on windows authentication. In this case other test methods must be implemented.</p>


							<!-- tags -->
							
							
							
							
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/wGetStarted/Security-Best-Practices_324403209.html";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "wGetStarted/Security-Best-Practices_324403209.md",
										"title": "Interject Documentation > Security Best Practices",
										"permalink": "https://github.com/gointerject/gointerject.github.io/blob/master/wGetStarted/Security-Best-Practices_324403209.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
                                            <li style="visibility: show">
                                                <a href="https://github.com/gointerject/gointerject.github.io/edit/master/wGetStarted/Security-Best-Practices_324403209.md">
                                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page
                                                </a>
                                            </li>
                                        
										<li><a href="https://github.com/gointerject/gointerject.github.io/issues/new?body=File: [wGetStarted/Security-Best-Practices_324403209.md](https://docs.gointerject.com/wGetStarted/Security-Best-Practices_324403209.html)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li>
										<li><a href="http://www.gointerject.com/call-us/"><i class="fa fa-question" aria-hidden="true"></i> Get support</a></li>
										<!-- toggle mode -->
										<!-- Turn night mode on and off
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
										-->
									</ul>
								</div>
								   
									<div id="side-toc-title">On this page:</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="/wGetStarted/Security-Best-Practices_324403209.html#overview" class="nomunge">Overview</a>
    <ul>
      <li><a href="/wGetStarted/Security-Best-Practices_324403209.html#database-connections-and-windows-authentication" class="nomunge">Database Connections and Windows Authentication</a></li>
      <li><a href="/wGetStarted/Security-Best-Practices_324403209.html#row-level-security-for-reports-and-apps" class="nomunge">Row Level Security for Reports and Apps</a></li>
      <li><a href="/wGetStarted/Security-Best-Practices_324403209.html#template-security" class="nomunge">Template Security</a></li>
      <li><a href="/wGetStarted/Security-Best-Practices_324403209.html#testing-user-access" class="nomunge">Testing User Access</a></li>
    </ul>
  </li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- The Modal for viewing images -->
	<div id="modal-main" class="modal" >
		<img class="modal-content nohover" id="modal-img" style="padding-top: 3%;"/>
		<span class="close-modal" style="padding-top: 3%;">
			<i class="fa fa-times-circle fa-1x"></i>
		</span>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div id="footerdiv" class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><h4>GENERAL</h4></li>
                        <li><a href="http://www.gointerject.com">INTERJECT HOME</a></li>
                        <li><a href="http://www.gointerject.com/#whatwedobest">WHAT WE DO BEST</a></li>
                        <li><a href="https://gointerject.com/#benefitsyoucanbankon">BENFITS</a></li>
                        <li><a href="https://gointerject.com/#whatourclientssay">WHAT OUR CLIENTS SAY</a></li>
                        <li><a href="https://gointerject.com/#upcomingevents">UPCOMING EVENTS</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://gointerject.com/#whatmatterstous"><h4>WHAT MATTERS TO US</h4> </a></li>
                        <li><a href="https://gointerject.com/helping-you-master-technology/">Mastering Technology</a></li>
                        <!--<li><a href="https://gointerject.com/helping-you-master-technology/">Attend Next Event</a></li>-->
                        <li><a href="https://gointerject.com/helping-you-master-technology/learn-on-your-own/">Learn On Your Own</a></li>
                        <li><a href="http://www.gointerject.com/kids-coding-clubs/">Kids Coding Club</a></li>
                        <li><a href="http://www.gointerject.com/helping-you-master-technology/">Tech Talks</a></li> 
                        <!-- <li><a href="http://www.gointerject.com/#whatwedobest">Reserve Your Spot</a></li> -->
                        <li><a href="https://gointerject.com/kids-coding-clubs/start-your-own-club/">Start Your Own Club</a></li>
                        <!-- <li><a href="https://gointerject.com/#whatmatterstous">Never Standing Still</a></li>  -->
                        <li><a href="https://gointerject.com/never-stand-still-blog/">Our Blog</a></li> 
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><h4>YOUR TEAM</h4></li>
                        <li><a href="https://gointerject.com/meet-us/">Meet Us</a></li>
                        <li><a href="https://gointerject.com/join-us/">Join Us</a></li>
                        <li><a href="https://gointerject.com/call-us/">Call Us</a></li>
                        <li><h4>SUPPORT</h4></li>
                        <li><a href="">Wiki / FAQ</a><span style="font-size:10px;padding-left: 7px;">(Coming Soon)</span></li>
                        <li><a href="">For Developers</a><span style="font-size:10px;padding-left: 7px;">(Coming Soon)</span></li>
                        <!-- <li class="break"></li> -->
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><h4>CONTACT INFO</h4></li>
                        <li><strong>Office:</strong> (855) 546-0036</li>
                        <li><strong>Fax:</strong>  (360) 838-9459</li>
                        <li><strong>Address:</strong> 1404 NE 134th St. Suite 200, </li>
                        <li>Vancouver, WA 98685</li> 
                        <li><strong>E-mail:</strong> info@gointerject.com</li>
                    </ul>
                </div>
            </div>
            
            <!-- ****** This Section is setup for 'the fine text' links ****** -->
            <!--
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="">Status</a></li>
                        <li><a href="">Security</a></li>
                        <li><a href="">Legal</a></li>
                    </ul>
                </nav>
            </div>
            -->
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright © 2018 INTERJECT Inc. All Rights Reserved.
                </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/gointerject">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/gointerject">Youtube</a></li> 
                    <li class="fa fa-github"><a href="https://github.com/gointerject">Github</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/gointerject">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/gointerject">Facebook</a></li>  
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="/css/github.css">
	
	<!-- <script src="/js/anchorlinks.js"></script> -->
	<script defer src="/js/menu.js"></script>
	<script src="/js/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var interjectVersion = 'v';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/wGetStarted/Security-Best-Practices_324403209.html';
	</script>
	<script src="/js/archive.js"></script>
	<script src="/js/stickyfill.min.js"></script>
	<script defer src="/js/metadata.js"></script>
	<script src="/js/glossary.js"></script>
	<script src="/js/collections_tocs.js"></script>
	<script defer src="/js/docs.js"></script>
	<script defer src="/js/toc.js"></script>
	<script defer src="/js/stylemod.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
